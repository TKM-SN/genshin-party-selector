<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>パーティセレクター</title>
  <style>
    body { font-family: system-ui, -apple-system, "Noto Sans JP", sans-serif; margin: 16px; }
    .row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }

    button { padding:8px 10px; border-radius:10px; border:1px solid rgba(0,0,0,.15); background:#fff; cursor:pointer; }
    button.primary { background:#16a34a; color:#fff; border-color:#16a34a; }
    button.warn { background:#f59e0b; color:#111; border-color:#f59e0b; }
    button.info { background:#3b82f6; color:#fff; border-color:#3b82f6; }

    input[type="text"] { padding:8px 10px; border-radius:10px; border:1px solid rgba(0,0,0,.2); min-width: 280px; }
    .muted { opacity: .75; }

    /* 抽選結果用のカード（縦） */
    .card{
      display:flex; align-items:center; gap:10px;
      padding:6px 8px; border-radius:12px;
      border:1px solid rgba(0,0,0,0.08);
      margin:6px 0;
    }
    .face{
      width:52px; height:52px; border-radius:12px;
      user-select:none; cursor:pointer;
      transition: filter .15s ease, transform .05s ease;
      display:block;
    }
    .face:active{ transform: scale(.98); }

    .unowned{ filter: grayscale(100%) brightness(55%) contrast(90%); }
    .owned{ filter: brightness(110%) contrast(110%); }

    .badge{
      display:inline-block; padding:2px 8px; border-radius:999px;
      border:1px solid rgba(0,0,0,0.12);
      font-size:12px; opacity:.9;
    }
    .small{ font-size:12px; opacity:.85; }

    #result { max-width: 820px; }

    /* 全選択ボタンだけ色 */
    #selectAll {
      background: #a855f7;
      border-color: #a855f7;
      color: #fff;
    }

    /* =========================
       一覧を “横並びタイル” にする（強制）
       - 名前は隠す（検索はJS側なのでOK）
       - ホバーは app.js の title で出る
       ========================= */
    #list{
      display: grid !important;
      grid-template-columns: repeat(auto-fill, minmax(84px, 1fr)) !important;
      gap: 10px !important;
      max-width: 1200px;
    }
    #list .card{
      margin: 0 !important;
      padding: 10px 6px !important;
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      gap: 6px !important;
      text-align: center;
      cursor: pointer;
    }
    #list .face{
      width: 72px !important;
      height: 72px !important;
      border-radius: 14px !important;
    }
    #list .card > div{
      display: none !important;
    }
  </style>
</head>
<body>
  <h1>パーティセレクター</h1>

  <div class="row">
    <button id="clearCache" class="warn">キャッシュ削除</button>
    <button id="selectAll" class="warn">全選択</button>
    <button id="reset">選択の全解除</button>
  </div>

  <div style="margin:10px 0;" class="muted" id="status">読み込み中…</div>

  <div class="row">
    <label>検索: <input id="q" type="text" placeholder="例：雷電 / アルベド / raiden / albedo" /></label>

    <label>表示数:
      <input id="maxShow" type="range" min="1" max="300" step="1" value="60" />
      <span id="maxShowLabel">60</span>
    </label>
  </div>

  <div id="list"></div>
  <hr />

  <div class="row">
    <label>抽選元:
      <select id="mode">
        <option>所持のみ</option>
        <option>未所持のみ</option>
        <option>混ぜる（所持人数を指定）</option>
      </select>
    </label>

    <label id="ownedKWrap">所持から:
      <select id="ownedK">
        <option>0</option><option>1</option><option selected>2</option><option>3</option><option>4</option>
      </select>
    </label>

    <label><input id="kleeBoost" type="checkbox" /> クレー出やすいモード</label>
    <button id="draw" class="primary">4人抽選！</button>
  </div>

  <div id="result"></div>

  <script src="./app.js"></script>
</body>
</html>
